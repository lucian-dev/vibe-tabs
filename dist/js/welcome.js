(()=>{"use strict";function t(t,e){e.innerHTML="",t.forEach((function(t,n){var o=document.createElement("li");o.innerHTML="\n        <span>".concat(t,'</span>\n        <div class="action-buttons">\n          <button class="edit-button" data-index="').concat(n,'">Edit</button>\n          <button class="delete-button" data-index="').concat(n,'">Delete</button>\n        </div>\n      '),e.appendChild(o)}))}document.addEventListener("DOMContentLoaded",(function(){var e=document.getElementById("createMood"),n=document.getElementById("moodForm"),o=document.getElementById("moodCreationForm"),s=document.getElementById("existingMoods"),d=document.getElementById("addTabButton"),a=document.getElementById("tabUrl"),i=document.getElementById("tabUrlError"),c=document.getElementById("tabsList"),l=[];e.addEventListener("click",(function(){n.style.display="block",e.style.display="none"})),chrome.storage.local.get("moods",(function(t){(t.moods||[]).length>0&&(s.style.display="block")})),o.addEventListener("submit",(function(e){e.preventDefault();var n=document.getElementById("moodName").value,s=document.getElementById("musicUrl").value,d=s;s&&!/^https?:\/\//i.test(s)&&(d="https://"+s),function(t,e){chrome.storage.local.get({moods:[]},(function(n){var o=n.moods||[];o.push(t),chrome.storage.local.set({moods:o},(function(){e()}))}))}({name:n,tabs:l,music:d},(function(){chrome.runtime.sendMessage({type:"showNotification",title:"Mood Saved",message:"".concat(n," mood has been saved successfully!"),url:chrome.runtime.getURL("src/options/options.html")}),o.reset(),t(l=[],c),window.location.href=chrome.runtime.getURL("src/options/options.html")}))})),d.addEventListener("click",(function(){var e=a.value.trim();e&&function(t){return new RegExp("^(https?:\\/\\/)?(([a-zA-Z\\d]([a-zA-Z\\d-]*[a-zA-Z\\d])*)\\.?)+\\.[a-zA-Z]{2,}(\\:\\d+)?(\\/[-a-zA-Z\\d%_.~+]*)*(\\?[;&a-zA-Z\\d%_.~+=-]*)?(\\#[-a-zA-Z\\d_]*)?$","i").test(t)}(e)?(a.classList.remove("error"),i.style.display="none",/^https?:\/\//i.test(e)?l.push(e):l.push("https://"+e),t(l,c),a.value=""):(a.classList.add("error"),i.style.display="block",a.focus())})),a.addEventListener("input",(function(){"block"===i.style.display&&(a.classList.remove("error"),i.style.display="none")})),c.addEventListener("click",(function(e){!function(e,n,o){var s=e.target,d=s.getAttribute("data-index");if(s.classList.contains("edit-button")){var a=prompt("Edit URL:",n[d]);a&&(n[d]=a,t(n,o))}else s.classList.contains("delete-button")&&(n.splice(d,1),t(n,o))}(e,l,c)}))}))})();